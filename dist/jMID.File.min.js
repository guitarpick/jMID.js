/**
 * jMID.File.min.js v0.1
 *
 * A javascript library for reading, manipulating, and writing MIDI files
 * @author Steven Sojka - Wednesday, January 30, 2013
 *
 * MIT Licensed
 */
var jMID=function(c){c.File=function(b){for(var a in b)b.hasOwnProperty(a)&&(this[a]=b[a]);this.timeSignature={beatsPerBar:4,beatValue:4};this.timing={MicroSPB:5E5};this.processMetaEvents();this.processChannelEventTimes()};c.File.prototype={processMetaEvents:function(){for(var b=c.Query(this).filter("type:meta").not("subtype:endOfTrack, subtype:trackName").toArray(),a=0,i=b.length;a<i;a++)switch(b[a].subtype){case "timeSignature":this.timeSignature.beatsPerBar=b[a].numerator;this.timeSignature.beatValue=
b[a].denominator;break;case "setTempo":this.timing.MicroSPB=b[a].microsecondsPerBeat}this.calculateBPM();this.timing.MSPQN=this.timing.MicroSPB/1E3;this.timing.MSPT=this.timing.MSPQN/this.header.ticksPerBeat},processChannelEventTimes:function(){for(var b=this.timing.MSPT,a=0,c=this.tracks.length;a<c;a++)for(var f=this.tracks[a],d=0,e=0,j=f.events.length;e<j;e++){var g=f.events[e],h=g.deltaTime*b;g.set("time",d+h);d+=h}},calculateBPM:function(){this.timing.BPM=6E7/this.timing.MicroSPB*(this.timeSignature.beatValue/
4)},getHeader:function(){return this.header},encode:function(){return(new c.Encoder).encode(this)},base64Encode:function(){return btoa(this.encode())}};return c}(jMID||{});
