var jMID=function(g){var m=function(){for(var a=this.slice(0),b,c=arguments,q=c.length,e;q&&a.length;)for(b=c[--q];-1!==(e=a.indexOf(b));)a.splice(e,1);return a},l=function(a){for(var b=a.split(",").map(function(a){return a.trim()}),a=[],c=0,e=b.length;c<e;c++)a.push(b[c].split(" "));b=[];c=0;for(e=this._results.tracks.length;c<e;c++){var g=this._results.tracks[c];b.push([]);for(var n=0,l=g.length;n<l;n++)for(var i=g[n],h=!1,o=0,m=a.length;o<m;o++){for(var p=a[o],k=0,r=p.length;k<r;k++){var j;a:{j=
p[k];for(var f=[":",">",">=","<","<="],d=f.length-1;0<=d;d--)if(-1!==j.search(f[d])){j=f[d];break a}j=void 0}d=p[k].split(j);f=d[0];d=d[1];switch(j){case ":":h=i[f]==d;break;case ">":h=i[f]>d;break;case ">=":h=i[f]>=d;break;case "<":h=i[f]<d;break;case "<=":h=i[f]<=d}if(!h)break}h&&b[c].push(i)}}return{tracks:b}},e=function(a,b){this._results=b?b:{tracks:a.tracks.slice(0)};this._file=a};e.prototype={filter:function(a){a=l.call(this,a);return new e(this._file,a)},not:function(a){for(var a=a?l.call(this,
a):this._results,b=[],c=0,g=a.tracks.length;c<g;c++)b.push(m.apply(this._results.tracks[c],a.tracks[c]));return new e(this._file,{tracks:b})},apply:function(){for(var a=0,b=this._results.tracks.length;a<b;a++)this._file.tracks[a]=this._results.tracks[a].slice(0);return new e(this._file)}};g.Query=function(a){if(!a)throw Error("jMID.File is needed for querying");return new e(a)};return g}(jMID||{});
