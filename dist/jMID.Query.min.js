var jMID=function(k){var m=function(a){for(var b=a.split(",").map(function(a){return a.trim()}),a=[],c=0,f=b.length;c<f;c++)a.push(b[c].split(" "));b=[];c=0;for(f=this._results.tracks.length;c<f;c++){var h=this._results.tracks[c];b.push(new k.Track);for(var n=0,m=h.getEvents().length;n<m;n++)for(var i=h.getEvents(n),g=!1,o=0,r=a.length;o<r;o++){for(var p=a[o],l=0,s=p.length;l<s;l++){var j;a:{j=p[l];for(var e=[":",">",">=","<","<="],d=e.length-1;0<=d;d--)if(-1!==j.search(e[d])){j=e[d];break a}j=void 0}d=
p[l].split(j);e=d[0];d=d[1];switch(j){case ":":g=i[e]==d;break;case ">":g=i[e]>d;break;case ">=":g=i[e]>=d;break;case "<":g=i[e]<d;break;case "<=":g=i[e]<=d}if(!g)break}g&&b[c].pushEvent(i)}}return{tracks:b}},f=function(a,b){this._results=b?b:{tracks:a.tracks.slice(0)};this._file=a};f.prototype={filter:function(a){a=m.call(this,a);return new f(this._file,a)},not:function(a){for(var a=a?m.call(this,a):this._results,b=[],c=0,q=a.tracks.length;c<q;c++){var h=new k.Track(a.tracks[c].cloneEvents());h.removeEvents.apply(h,
this._results.tracks[c].getEvents());b.push(h)}return new f(this._file,{tracks:b})},apply:function(){for(var a=0,b=this._results.tracks.length;a<b;a++)this._file.tracks[a]=new k.Track(this._results.tracks[a].cloneEvents());return new f(this._file)}};k.Query=function(a){if(!a)throw Error("jMID.File is needed for querying");return new f(a)};return k}(jMID||{});
