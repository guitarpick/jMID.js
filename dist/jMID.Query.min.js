var jMID=function(l){var n=function(a){for(var b=a.split(",").map(function(a){return a.trim()}),a=[],c=0,f=b.length;c<f;c++)a.push(b[c].split(" "));b=[];c=0;for(f=this._results.tracks.length;c<f;c++){var g=this._results.tracks[c];b.push(new l.Track);for(var h=0,n=g.getEvents().length;h<n;h++)for(var j=g.getEvents(h),i=!1,o=0,r=a.length;o<r;o++){for(var p=a[o],m=0,s=p.length;m<s;m++){var k;a:{k=p[m];for(var e=[":",">",">=","<","<="],d=e.length-1;0<=d;d--)if(-1!==k.search(e[d])){k=e[d];break a}k=void 0}d=
p[m].split(k);e=d[0];d=d[1];switch(k){case ":":i=j[e]==d;break;case ">":i=j[e]>d;break;case ">=":i=j[e]>=d;break;case "<":i=j[e]<d;break;case "<=":i=j[e]<=d}if(!i)break}i&&b[c].pushEvent(j)}}return{tracks:b}},g=function(a,b){this._results=b?b:{tracks:a.tracks.slice(0)};this._file=a};g.prototype={filter:function(a){a=n.call(this,a);return new g(this._file,a)},not:function(a){for(var a=n.call(this,a),b=this._results,c=[],f=0,q=b.tracks.length;f<q;f++){var h=new l.Track(b.tracks[f].cloneEvents());h.removeEvents.apply(h,
a.tracks[f].getEvents());c.push(h)}return new g(this._file,{tracks:c})},toArray:function(){for(var a=[],b=0,c=this._results.tracks.length;b<c;b++)a=a.concat(this._results.tracks[b].events);return a},apply:function(){for(var a=0,b=this._results.tracks.length;a<b;a++)this._file.tracks[a]=new l.Track(this._results.tracks[a].cloneEvents());return new g(this._file)}};l.Query=function(a){if(!a)throw Error("jMID.File is needed for querying");return new g(a)};return l}(jMID||{});
